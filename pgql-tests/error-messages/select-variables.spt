module common-path-expressions

language pgql-lang

test Reference within SELECT [[

    SELECT n.prop AS v1, [[v1]] + 2 AS v2
      FROM g MATCH( (n) )

]] error like "Unresolved variable" at #1

test Reference within SELECT [[

    SELECT n.prop AS v1, [[v1]] + 2 AS v2
      FROM g MATCH( (n) )

]] error like "Unresolved variable" at #1

test Reference to aggregation (1) [[

    SELECT [[COUNT(n.prop)]] AS v
      FROM g MATCH( (n) )
  GROUP BY v

]] error like "Aggregation without group variables not allowed in GROUP BY" at #1

test Reference to aggregation (2) [[

    SELECT [[COUNT(e.prop)]] AS v
      FROM g MATCH( SHORTEST( (n) -[e]->* (m) ))
  GROUP BY v

]] error like "Aggregation without group variables not allowed in GROUP BY" at #1

test Variables in MATCH shadow variables in SELECT [[

    SELECT [[n]].age AS n
      FROM MATCH( (n) )
  GROUP BY n.prop AS prop

]] error like "Unresolved variable (did you mean to use a group key?)" at #1
